<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="Puppet-ntp : Puppet module for NTP" />

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Puppet-ntp</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/erwbgy/puppet-ntp">View on GitHub</a>

          <h1 id="project_title">Puppet-ntp</h1>
          <h2 id="project_tagline">Puppet module for NTP</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/erwbgy/puppet-ntp/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/erwbgy/puppet-ntp/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h1>puppet-ntp</h1>

<p>Puppet module for managing the Network Time Server daemon (ntpd) on a Linux
host. Configuration can either be a list of time server hostnames to use or a
country code/continent which results in appropriate pool.ntp.org time server
hosts being used.</p>

<p>Currently only works on Redhat-like systems.</p>

<h2>Parameters</h2>

<p><em>servers</em>: a list of time server hostnames</p>

<p><em>country</em>: the country code (eg. <em>de</em> for Germany or <em>uk</em> for United Kingdom)</p>

<p><em>continent</em>: one of: <em>europe</em>, <em>asia</em>, <em>oceania</em>, <em>north-america</em>, <em>south-america</em>, <em>africa</em></p>

<p><em>use_hiera</em>: get configuration values using hiera</p>

<p><em>use_extlookup</em>: get configuration values using extlookup</p>

<p>If servers is specified it takes precedence over country or continent.  If
only country and continent are specified then country takes precedence over
continent.</p>

<p>If use_hiera or use_extlookup are specified then the other parameters are
ignored.  Hiera is checked before extlookup.</p>

<h3>Hiera configuration</h3>

<p>Add an ntp_servers, ntp_country or ntp_continent variable to a hiera config
file - for example in /etc/puppet/hieradata/common.yaml:</p>

<p>Add the ntp_servers variable with a list of time server hostnames (often
internal hosts):</p>

<pre><code>ntp_servers:
  - ntp1.domain.com
  - ntp2.domain.com
</code></pre>

<p>Or the ntp_country variable with a country code:</p>

<pre><code>ntp_country: de
</code></pre>

<p>Or the ntp_continent variable with one of 'europe', 'asia', 'oceania',
'north-america', 'south-america', 'africa':</p>

<pre><code>ntp_continent: africa
</code></pre>

<h3>Extlookup configuration</h3>

<p>Add an ntp_servers, ntp_country or ntp_continent variable to an extlookup
config file - for example in /etc/puppet/extdata/common.csv:</p>

<p>Add the ntp_servers variable with a list of time server hostnames (often
internal hosts):</p>

<pre><code>ntp_servers,ntp1.domain.com,ntp2.domain.com
</code></pre>

<p>Or the ntp_country variable with a country code:</p>

<pre><code>ntp_country,de
</code></pre>

<p>Or the ntp_continent variable with one of 'europe', 'asia', 'oceania',
'north-america', 'south-america', 'africa':</p>

<pre><code>ntp_continent,africa
</code></pre>

<h2>Examples</h2>

<p>Use default pool.ntp.org time servers:</p>

<pre><code>class { 'ntp': }
</code></pre>

<p>Specify a list of time servers to use:</p>

<pre><code>class { 'ntp':
  servers =&gt; [ 'ntp1.domain.com', 'ntp2.domain.com' ],
}
</code></pre>

<p>Use time servers from a specific country, in this case the United Kingdom:</p>

<pre><code>class { 'ntp':
  country =&gt; 'uk',
}
</code></pre>

<p>Use time servers from a specific continent, in this case Asia:</p>

<pre><code>class { 'ntp':
  continent =&gt; 'asia',
}
</code></pre>

<p>Look up configuration using hiera:</p>

<pre><code>class { 'ntp':
  use_hiera =&gt; true,
}
</code></pre>

<p>Look up configuration using extlookup:</p>

<pre><code>class { 'ntp':
  use_extlookup =&gt; true,
}
</code></pre>

<h2>Notes</h2>

<p>See <a href="http://www.pool.ntp.org/en/use.html">How do I use pool.ntp.org</a> for
details of the available NTP zones.  NTP servers are not available for all
countries - see the country list under each continent - so use a continent or
the default pool if your country is not listed.</p>

<h2>Testing</h2>

<p>Tests are implemented using RSpec, rspec-puppet and puppetlabs_spec_helper.  To
run them you will first need to install puppetlabs_spec_helper:</p>

<pre><code># gem install puppetlabs_spec_helper
</code></pre>

<p>Then switch to the module directory and run rake:</p>

<pre><code>$ rake
rake build            # Build puppet module package
rake clean            # Clean a built module package
rake coverage         # Generate code coverage information
rake help             # Display the list of available rake tasks
rake lint             # Check puppet manifests with puppet-lint
rake spec             # Run spec tests in a clean fixtures directory
rake spec_clean       # Clean up the fixtures directory
rake spec_prep        # Create the fixtures directory
rake spec_standalone  # Run spec tests on an existing fixtures directory

$ rake spec
/usr/bin/ruby -S rspec spec/classes/ntp_spec.rb --color
............

Finished in 1.02 seconds
12 examples, 0 failures
</code></pre>

<h2>Support</h2>

<p>License: Apache License, Version 2.0</p>

<p>GitHub URL: <a href="https://github.com/erwbgy/puppet-ntp">https://github.com/erwbgy/puppet-ntp</a></p>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Puppet-ntp maintained by <a href="https://github.com/erwbgy">erwbgy</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
